完全描述清楚范式，需要精确的数学语言，但是那样非常抽象。所以，大多数教材描述范式都是用例子来说明的，这些例子侧重于讲解当前存在的问题，和范式改造的目的。

范式的最终目的是降低数据冗余，消除插入和更新异常。消除掉函数依赖和多值依赖。
> 函数依赖是多值依赖的一种特殊的情况，而多值依赖实际上是连接依赖的一种特殊情况。但连接依赖不 像函数依赖和多值依赖可以由 语义直接导出 ，而是在 关系连接运算 时才反映出来。
> 连接依赖对应第五范式，没有实际应用

第一范式、第二范式是对于本表内。第三范式、BC范式和第四范式涉及多表。
1NF，2NF是关系数据库的要求，3NF，4NF是为降低冗余，有时候为了为了查询性能，可以反范式化。





## 范式

◆ **第一范式（1NF）**：**无重复的列**.
  **第二范式（2NF）**： **属性完全依赖于主键**
  **第三范式（3NF）**：**属性不传递依赖于其它非主属性。**
  **第一范式(确保每列保持原子性)**
  **第二范式(确保表中的每列都和主键相关)**
  **第三范式(确保每列都和主键列直接相关,而不是间接相关)**


#### 反范式化

在模式分解之前，首先对于1NF,2NF,3NF,BCNF做一个简明扼要的介绍。

1NF是指数据库表的每一列都是不可分割的基本数据项，即实体中的某个属性不能有多个值或者不能有重复的属性。

2NF要求属性完全依赖于主键，不能存在仅依赖主关键字一部分的属性。

3NF要求每一个非主属性既不部分依赖于码也不传递依赖于码。

BCNF消除了主属性对候选码的部分和传递函数依赖。


第一范式、第二范式是对于本表内。第三范式、BC范式和第四范式涉及多表。  
1、第一范式比较简单，属性不可拆分。电话号码一个字段可以分为手机号码和座机号码两个字段。  
2、第二范式不难理解，非主属性对候选键完全依赖，不能存在部分依赖。候选键只有一个主属性时则一定符合第二范式。  
候选键包含多个主属性时，可能出现不符合第二范式的情况，就是非主属性对多属性候选键部分函数依赖。在非主属性对多属性候选键完全函数依赖时，才符合第二范式。  
3、第三范式去除冗余，非主属性只能存在一个表中，不应该存在多个表中，要去除无意义的数据冗余。  
4、BC范式则不应存在关键字决定关键字的情况。也就是在关联关系表中，一个表有多个属性构成复合的候选键，主属性直接不应该有互相依赖。工号和身份证号是相互依赖。  
5、第四范式，对于候选键只能存在不超过1个多值属性。要求把同一表内的多对多关系删除。

  



BCNF

1.  BCNF意味着在关系模式中每一个决定因素都包含候选键，也就是说，只要属性或属性组A能够决定任何一个属性B，则A的子集中必须有候选键

2.  BCNF范式排除了任何属性(不光是非主属性，2NF和3NF所限制的都是非主属性)对候选键的传递依赖与部分依赖。 

3.  BCNF是在函数依赖的条件下对模式分解所能达到的最大程度

4.  一个模式中的关系模式如果都属于BCNF，那么在函数依赖范围内

5.  它已经实现了彻底的分离，已消除了插入和删除的异常



## ER模型

ER模型更多用于梳理业务逻辑，使用ER模型整理思路。

#### 要素

- **实体**

- **属性**

	注意：实体和属性不容易区分。这里提供一个原则：我们要从系统整体的角度出发去看，可以独立存在 的是实体，不可再分的是属性。也就是说，属性不能包含其他属性。

- **关系**

	关系的类型

	关系又可以分为 3 种类型，分别是 一对一、一对多、多对多。

	遇到 join(两表关系) 引起的数据重复的情况，使用关系的类型描述。

	

#### ER模型转为数据表

（1）一个 实体 通常转换成一个 数据表 ； 

（2）一个 多对多的关系 ，通常也转换成一个 数据表 ； 

（3）一个 1 对 1 ，或者 1 对多 的关系，往往通过表的 外键 来表达，而不是设计一个新的数据表； 

（4） 属性 转换成表的 字段 。



ER模型图

Entity： 正方形表示

Relationship: `1:1`, `1:N` , `N:N`

Attribute : 椭圆表示









## 主键原则

 
